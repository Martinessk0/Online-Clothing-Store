<section *ngIf="!loading && orders.length"
         class="rounded-2xl border border-slate-200 bg-white/80 shadow-sm
                dark:border-slate-800 dark:bg-slate-900/80">

  <div class="lg:hidden px-4 py-3 space-y-3">
    <article *ngFor="let order of orders"
             class="rounded-2xl border border-slate-200 bg-slate-900/80 px-3 py-3
                    text-slate-50 shadow-sm dark:border-slate-700">
      <div class="flex items-start justify-between gap-2">
        <div>
          <div class="text-[11px] text-slate-400">
            Поръчка #{{ order.id }}
          </div>
          <div class="text-[11px] text-slate-400">
            {{ order.createdAt | date: 'dd.MM.yyyy HH:mm' }}
          </div>
        </div>

        <div class="text-right">
          <div class="text-sm font-semibold">
            {{ order.totalAmount | number:'1.2-2' }} лв.
          </div>
          <div class="text-[11px] text-slate-400">
            Артикули: {{ order.itemsCount }}
          </div>
        </div>
      </div>

      <div class="mt-2 text-xs space-y-0.5">
        <div class="font-medium">
          {{ order.customerName }}
        </div>
        <div class="text-slate-400 line-clamp-2">
          {{ order.address }}
        </div>
        <div class="text-slate-400">
          {{ order.email }} • {{ order.phone }}
        </div>
      </div>

      <div class="mt-3 flex items-center justify-between gap-2">
        <select
          [ngModel]="order.status"
          (ngModelChange)="onStatusChange(order, $event)"
          class="flex-1 rounded-xl border border-slate-600 bg-slate-900 px-2 py-1 text-[11px]
                 focus:outline-none focus:ring-2 focus:ring-blue-500/60"
          [disabled]="savingId === order.id"
        >
          <option *ngFor="let s of statuses" [ngValue]="s">
            {{ getStatusLabel(s) }}
          </option>
        </select>

        <span *ngIf="savingId === order.id"
              class="text-[11px] text-slate-400">
          Запис...
        </span>
      </div>
    </article>
  </div>

  <div class="hidden lg:block overflow-x-auto">
    <table class="min-w-full text-sm">
      <thead class="bg-slate-100/80 dark:bg-slate-900/60">
        <tr>
          <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wide">
            №
          </th>
          <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wide">
            Дата
          </th>
          <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wide">
            Клиент
          </th>
          <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wide">
            Контакт
          </th>
          <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wide">
            Артикули
          </th>
          <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wide">
            Общо
          </th>
          <th class="px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wide">
            Статус
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let order of orders"
            class="border-t border-slate-100 dark:border-slate-800">
          <td class="px-4 py-3 align-middle text-xs font-medium">
            #{{ order.id }}
          </td>
          <td class="px-4 py-3 align-middle text-xs text-slate-500 dark:text-slate-400">
            {{ order.createdAt | date: 'dd.MM.yyyy HH:mm' }}
          </td>
          <td class="px-4 py-3 align-middle">
            <div class="text-sm font-medium">
              {{ order.customerName }}
            </div>
            <div class="text-xs text-slate-500 dark:text-slate-400">
              {{ order.address }}
            </div>
          </td>
          <td class="px-4 py-3 align-middle text-xs text-slate-500 dark:text-slate-400">
            <div>{{ order.email }}</div>
            <div>{{ order.phone }}</div>
          </td>
          <td class="px-4 py-3 align-middle text-center text-sm">
            {{ order.itemsCount }}
          </td>
          <td class="px-4 py-3 align-middle text-sm font-semibold">
            {{ order.totalAmount | number:'1.2-2' }} лв.
          </td>
          <td class="px-4 py-3 align-middle">
            <div class="flex items-center gap-2">
              <select
                [ngModel]="order.status"
                (ngModelChange)="onStatusChange(order, $event)"
                class="rounded-xl border border-slate-300 bg-white px-2 py-1 text-xs
                       dark:border-slate-700 dark:bg-slate-900"
                [disabled]="savingId === order.id"
              >
                <option *ngFor="let s of statuses" [ngValue]="s">
                  {{ getStatusLabel(s) }}
                </option>
              </select>

              <span *ngIf="savingId === order.id"
                    class="text-[11px] text-slate-400 dark:text-slate-500">
                Запис...
              </span>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</section>
