<div class="flex flex-col lg:flex-row gap-4">
  <!-- Left: Filters Sidebar -->
  <aside class="w-full lg:w-1/5 space-y-3 sticky top-4">
    <h2 class="text-md font-semibold">Филтри</h2>
<div class="flex flex-col">
    <label class="text-sm font-medium mb-1">Търсене</label>
    <input
      type="text"
      [(ngModel)]="search"
      (input)="applyFilter()"
      placeholder="Име / описание / марка"
      class="w-full border rounded px-2 py-1 text-sm"
    />
  </div>

  <!-- Price Range (keep side by side) -->
  <div class="flex flex-col">
    <label class="text-sm font-medium mb-1">Цена</label>
    <div class="flex gap-1">
      <input
        type="number"
        [(ngModel)]="filter.minPrice"
        (input)="applyFilter()"
        placeholder="Мин."
        class="w-1/2 border rounded px-2 py-1 text-sm"
      />
      <input
        type="number"
        [(ngModel)]="filter.maxPrice"
        (input)="applyFilter()"
        placeholder="Макс."
        class="w-1/2 border rounded px-2 py-1 text-sm"
      />
    </div>
  </div>

  <!-- Brand Dropdown -->
  <div class="flex flex-col">
    <label class="text-sm font-medium mb-1">Марка</label>
    <select [(ngModel)]="filter.brand" (change)="applyFilter()"
            class="w-full rounded-xl border px-2 py-1 text-sm">
      <option value="">Всички марки</option>
      <option *ngFor="let b of brands" [value]="b">{{ b }}</option>
    </select>
  </div>

  <!-- Size Dropdown -->
  <div class="flex flex-col">
    <label class="text-sm font-medium mb-1">Размер</label>
    <select [(ngModel)]="filter.size" (change)="applyFilter()"
            class="w-full rounded-xl border px-2 py-1 text-sm">
      <option value="">Всички размери</option>
      <option *ngFor="let s of sizes" [value]="s">{{ s }}</option>
    </select>
  </div>

  <!-- Color Dropdown -->
  <div class="flex flex-col">
    <label class="text-sm font-medium mb-1">Цвят</label>
    <select [(ngModel)]="filter.color" (change)="applyFilter()"
            class="w-full rounded-xl border px-2 py-1 text-sm">
      <option value="">Всички цветове</option>
      <option *ngFor="let c of colors" [value]="c">{{ c }}</option>
    </select>
  </div>

  <!-- In-stock Checkbox -->
  <div class="flex items-center gap-2">
    <input type="checkbox" [(ngModel)]="filter.inStockOnly" (change)="applyFilter()" />
    <label class="text-sm">Само налични</label>
  </div>

  <!-- Sorting Dropdown -->
  <div class="flex flex-col">
    <label class="text-sm font-medium mb-1">Сортирай</label>
    <select [(ngModel)]="filter.sortBy" (change)="applyFilter()" class="w-full border rounded px-2 py-1 text-sm">
      <!-- <option value="">Подреди по</option> -->
      <option value="PriceAsc">Цена ↑</option>
      <option value="PriceDesc">Цена ↓</option>
      <option value="Newest">Най-нови</option>
      <option value="Oldest">Най-стари</option>
    </select>
  </div>

  <button
  (click)="clearFilters()"
  class="w-full mt-2 bg-slate-200 hover:bg-slate-300 text-sm px-3 py-1 rounded-xl"
>
  Изчисти филтрите
</button>

</aside>

  <!-- Right: Products -->
  <main class="flex-1 grid gap-3 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
    <div *ngIf="loading" class="text-sm text-slate-500">
      Зареждане на продукти...
    </div>

    <div *ngIf="error" class="text-sm text-red-600">
      {{ error }}
    </div>

    <app-product-card
      *ngFor="let p of filteredProducts"
      [product]="p"
    ></app-product-card>

    <div *ngIf="!loading && !filteredProducts.length"
      class="text-sm text-slate-500 bg-white/80 border border-slate-200 rounded px-3 py-2">
      Няма намерени продукти.
    </div>
  </main>
</div>
